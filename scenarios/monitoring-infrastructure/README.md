

### # ๐ **ุงุณุชูุฑุงุฑ ุณุณุชู ูุงูุชูุฑูฺฏ ุจุง Prometheusุ Grafana ู Node Exporter**

---

## โ๏ธ **ุชูุถุญ ฺฉู ุณูุงุฑู**

**ูุฏู:**  
ูพุงุฏูโุณุงุฒ ฺฉ ุณุณุชู ูุงูุชูุฑูฺฏ ุฌุงูุน ุจุฑุง ูุธุงุฑุช ุจุฑ ุนููฺฉุฑุฏ ู ุณูุงูุช ุฒุฑุณุงุฎุชโูุง ุณุฑูุฑ ู ุณุฑูุณโูุง.  

**ุณุงุฎุชุงุฑ:**  
- **ฑ ุณุฑูุฑ Prometheus** ุจุฑุง ุฌูุนโุขูุฑ ูุชุฑฺฉโูุง ู ฺฏุฑุงูุงูุง ุจุฑุง ููุงุดุ ู ุชุฌุฒู ู ุชุญูู ูุชุฑฺฉโูุง 
- **ฒ ุณุฑูุฑ ูุฏู (Node Exporter)** ุจุฑุง ุงุฑุงุฆู ุฏุงุฏูโูุง ูุชุฑฺฉ ุจู Prometheus  
- ูุญุฏูุฏุณุงุฒ ุฏุณุชุฑุณ ุจู ุฑุงุจุท ูุจ Prometheus ู Grafana ุงุฒ ุทุฑู IPโูุง ูุฌุงุฒ  
- ุชูุธู ูุดุฏุงุฑูุง (Alerting Rules) ุฏุฑ Prometheus  
- ุฐุฎุฑู ูุงฺฏโูุง ุจุง **Log Rotation** ุจุฑุง ุฌููฺฏุฑ ุงุฒ ูพุฑ ุดุฏู ุฏุณฺฉ  

---

## ๐๏ธ **ุฒุฑุณุงุฎุช ูพุดููุงุฏ**

- **ุณุณุชูโุนุงูู:** Ubuntu 20.04 / 22.04  

- **ุดุจฺฉู:**  
   - **Prometheus:** 10.0.0.41  
   - **Node Exporters:** 10.0.0.51, 10.0.0.52

- **ููุงุจุน ุณุฎุชโุงูุฒุงุฑ:**  

  - **CPU:**  
     - **Prometheus:** 2Core  
     - **Node Exporters:** 1Core  
  - **ูููุฑ:**  
     - **Prometheus:** 4G  
     - **Node Exporters:** 1G  
  - **ุฏุณฺฉ:**  
     - **Prometheus:**  
       - **PV:** /deb/sda1 **VG:** vg_root **LV:** lv_root **SIZE:** 50G **MOUNTPOINT:** /  
       - **PV:** /deb/sdb **VG:** vg_prometheus **LV:** lv_prometheus **SIZE:** 30G **MOUNTPOINT:** /var/lib/prometheus  
       - **PV:** /deb/sdb **VG:** vg_prometheus **LV:** lv_grafana **SIZE:** 10G **MOUNTPOINT:** /var/lib/grafana  

- **ูุงุณุช ูู:**  
    - **prometheus-server**  
    - **node-1**  
    - **node-2**  

---

## ๐ **ุฌุฒุฆุงุช ูพฺฉุฑุจูุฏ**

### **Prometheus Server**
- **Grafana** ูพุงุฏู ุณุงุฒ ุณุฑูุณ ฺฏุฑุงูุงูุง ู ุงุฌุงุฏ ุฏุงุดุจูุฑุฏ ุจุฑุง ููุงุด ูุชุฑฺฉ ูุง ูพุฑุงูุชูุณ
  - **ุฏุงุดุจูุฑุฏูุง:** ุงุฌุงุฏ ุฏุงุดุจูุฑุฏูุง ฺฏุฑุงูฺฉ ุจุฑุง ูุชุฑฺฉโูุง ุณุฑูุฑูุง  
  - **Auth:** ุชูุธู ุงุญุฑุงุฒ ููุช ุจุฑุง ุฏุณุชุฑุณ ุจู ุฑุงุจุท ูุจ  
  - **Datasource:** ุงุชุตุงู ุจู Prometheus  
  - **Dashboard Backup Service:** ฺฉ ุงุณฺฉุฑูพุช ุจุด ุจุฑุง ูพุดุชุจุงูโฺฏุฑ ุงุฒ ุฏุงุดุจูุฑุฏ ูุง ฺฏุฑุงูุงูุง ุจูโุตูุฑุช ููุชฺฏ  

- **Prometheus** ุณุฑูุณ ูพุฑุงูุชูุณ ุจู ููุฑุงู basic authentication ูุฑ ฑต ุซุงูู ุฏุชุง ุงฺฉุณูพูุฑุชุฑ ุฏู ููุฏ ุฏฺฏุฑ ุฑุง ุฏุฑุงูุช ู ุจู ูุฏุช ฑต ุฑูุฒ ุฏุฑ ุฎูุฏ ูฺฏู ุฏุงุฑุฏ
  - **metrics:** ุฌูุนโุขูุฑ ูุชุฑฺฉโูุง Node Exporter ู ุขุดูุง ุดุฏู ุจุง ุงููุงุน ูุชุฑฺฉ ูุง ูพุฑุงูุชูุณ
  - **ุฏุณุชุฑุณ ุงูู:** ุฏุณุชุฑุณ ุจู UI ููุท ุงุฒ ุทุฑู IPโูุง ูุฌุงุฒ ุจู ููุฑุงู ุฏุงุดุชู basic authentication.
  - **Alerting Rules:** ูุดุฏุงุฑูุง ูุงููุฏ ุงุณุชูุงุฏู ุฒุงุฏ ุงุฒ CPUุ ูููุฑ ุง ูุถุง ุฏุณฺฉ  
- **Alertmanager**
  - **Alert Sender Api:** ุงุฌุงุฏ ฺฉ ุงุณฺฉุฑูพุช ู ุชุจุฏู ุขู ุจู ุณุฑูุณ ุจุฑุง ุงุฑุณุงู ุขูุฑุช ูุง Alertmanager ุจู ูพุงูุฑุณุงู ุจูู
  - **Alertmanager:** ูพฺฉุฑุจูุฏ ุงุฑุณุงู ุขูุฑุช ุจุง ุชูุฌู ุจู ุณุทุญ ุญุณุงุณุช ุขู ูุง ุฏุฑ ุฏู ฺฏุฑูู ูุฌุฒุง ุฏุฑ ูพุงูุฑุณุงู ุจูู(ูุซูุง ฺฉ ฺฏุฑูู ุจุง ูุงู example-alert-warning ุจุฑุง ุขูุฑุช ูุง ุงุฒ ููุน warning ู example-alert-error ุจุฑุง ุขูุฑุช ูุง ุงุฒ ููุน error )

- **Log Rotation:** ุฌููฺฏุฑ ุงุฒ ูพุฑ ุดุฏู ูุถุง ุฏุณฺฉ

### **Grafana Server**  
- **ุฏุงุดุจูุฑุฏูุง:** ุงุฌุงุฏ ุฏุงุดุจูุฑุฏูุง ฺฏุฑุงูฺฉ ุจุฑุง ูุชุฑฺฉโูุง ุณุฑูุฑูุง  
- **Auth:** ุชูุธู ุงุญุฑุงุฒ ููุช ุจุฑุง ุฏุณุชุฑุณ ุจู ุฑุงุจุท ูุจ  
- **Datasource:** ุงุชุตุงู ุจู Prometheus  
- **Alerting:** ูุดุฏุงุฑูุง ูพุดุฑูุชู ุงุฒ ุทุฑู Slack ุง Email  
- **Backup Service:** ฺฉ ุงุณฺฉุฑูพุช ุจุด ุจุฑุง ูพุดุชุจุงูโฺฏุฑ ุงุฒ ุชูุธูุงุช Grafana ุจูโุตูุฑุช ููุชฺฏ  

### **Node Exporter**  
- **ูุชุฑฺฉโูุง:** ูุธุงุฑุช ุจุฑ ุงุณุชูุงุฏู CPUุ ูููุฑุ ุฏุณฺฉุ ุดุจฺฉู ู ูุถุนุช ุณุณุชู  
- **ูพฺฉุฑุจูุฏ ุฏุณุชุฑุณ:** ูุญุฏูุฏุณุงุฒ ุฏุณุชุฑุณ ุจู ูพูุฑุช Node Exporter ุจุฑุง Prometheus  

---

## ๐ **ุชุณุช ู ุงุนุชุจุงุฑุณูุฌ**

- ุจุฑุฑุณ ุงุชุตุงู Prometheus ุจู Node Exporter  
- ุชุณุช ูุดุฏุงุฑูุง ุชูุธูโุดุฏู  
- ุฏุณุชุฑุณ ุจู ุฏุงุดุจูุฑุฏูุง Grafana  
- ุชุณุช ูพุดุชุจุงูโฺฏุฑ ุงุฒ ุชูุธูุงุช Grafana  
- ุชุณุช Log Rotation  

---

## ๐ **ฺฏุงูโูุง ุจุนุฏ (ูพุดุฑูุชูโุชุฑ)**  
- **Blackbox Exporter:** ุจุฑุง ูุงูุชูุฑูฺฏ ููุงุท ูพุงุงู (Endpoints)  
- **SSL/TLS + reverse-proxy :**  ุงุถุงูู ฺฉุฑุฏู ฺฉ reverse-proxy ูุซู haproxy ุฌูู ุฏุณุช ูพุฑูุงูุชูุณ ู ฺฏุฑุงูุงูุง ู ูพุงุฏู ุณุงุฒ ุฏุงููู ู ุงุณ ุงุณ ุงู ุฑู ุงูุฏูพููุช ูุง ูพุฑุงูุชูุณ ู ฺฏุฑุงูุงูุง  
- ูพุงุฏู ุณุงุฒ ุฒุฑุณุงุฎุช ฺฉุงูู ูุงูุชูุฑูฺฏ ุณุฑูุณ ูุง ุณูุงุฑู [Static Website with HAProxy Load Balancer](scenarios/monitoring-infrastructure/README.md)

ุงฺฏุฑ ูุงุฒ ุจู ุฌุฒุฆุงุช ุจุดุชุฑ ุฏุงุฑุฏุ ุงุทูุงุน ุฏูุฏ! ๐