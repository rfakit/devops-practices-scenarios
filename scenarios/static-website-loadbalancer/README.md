# ๐ ** ูพุงุฏูโุณุงุฒ ุณุงุช ุงุณุชุงุชฺฉ ุจุง HAProxy ู NGINX**

---

## โ๏ธ **ุชูุถุญ ฺฉู ุณูุงุฑู**

**ูุฏู:**  
ูพุงุฏูโุณุงุฒ ฺฉ ูุจโุณุงุช ุงุณุชุงุชฺฉ ุจุง ูุนูุงุฑ High Availability (HA) ู ูฺฺฏโูุง ูพุดุฑูุชู ุจุฑุง ุจูุจูุฏ ุนููฺฉุฑุฏุ ุงููุช ู ูุฏุฑุช.  

**ุณุงุฎุชุงุฑ:**  
- **ฒ ููุฏุจุงูุงูุณุฑ (HAProxy)** ุจุง ุขุฏุฑุณ IP ุดูุงูุฑ  
- **ฒ ุณุฑูุฑ ูุจ (NGINX)** ุจุฑุง ุงุฑุงุฆู ูุญุชูุง ุงุณุชุงุชฺฉ  
- **ฑ ุณุฑูุฑ ุจฺฉ ุขูพ** ุจุฑุง ูฺฏู ุฏุงุฑ ุจฺฉ ุขูพ ูุงู ูุง ูุจ
- ูุฑ ุณุฑูุฑ ุงุฒ ฺฉ Logical Volume (LV) ุจุฑุง `/var` ุงุณุชูุงุฏู ูโฺฉูุฏ  
- ูุญุฏูุฏ ุณุงุฒ ุฏุณุชุฑุณ ุจู ูพูุฑุช ธฐ ุณุฑูุฑูุง ูุจ ููุท ุงุฒ ุทุฑู ุขุฏุฑุณ ูุง ููุฏุจุงูุงูุณุฑ
- ูุญุฏูุฏุณุงุฒ ูพูุฑุช ฒฒ ุฑู ููู ุณุฑูุฑ ูุง ุจู ุขุฏุฑุณ ุณุณุชู ุฎูุฏุชุงู 
- ุงุณุชูุงุฏู ุงุฒ **SSL ูุนุชุจุฑ Let's Encrypt** ุฏุฑ ููุฏุจุงูุงูุณุฑูุง  
- ููุฏุจุงูุงูุณุฑูุง ุงุฒ ูุชุฏ **Source IP** ุจุฑุง ุชูุฒุน ุชุฑุงูฺฉ ุงุณุชูุงุฏู ูโฺฉููุฏ  
- ุงุนูุงู **Rate Limiting** ุจุฑ ุงุณุงุณ IP ู HTTP Method  
- ูพุงุฏูโุณุงุฒ **ฺฉุด (Cache)** ุฏุฑ ุณูุช ููุฏุจุงูุงูุณุฑ ุง ูุจโุณุฑูุฑูุง  
- ุชูุธู **Log Rotation** ุจุฑุง ุฌููฺฏุฑ ุงุฒ ูพุฑ ุดุฏู ุฏุณฺฉ ุชูุณุท ูุงฺฏโูุง  
- ุงุณฺฉุฑูพุช ูพุดุชุจุงูโฺฏุฑ ุงุฒ ูุงูโูุง ูุจ ู ุงูุชูุงู ุขูโูุง ุจู ุณุฑูุฑ ุจฺฉุงูพ ููุฑุงู ุจุง ฺฉ **systemd service**

---

## ๐๏ธ **ุฒุฑุณุงุฎุช ูพุดููุงุฏ**

- **ุณุณุชูโุนุงูู:** Ubuntu 20.04 / 22.04  

- **ุดุจฺฉู:**  
   - **LoadBlancers:** 10.0.0.11 , 10.0.0.12 (Floating Vritual IP- 10.0.0.10) (DNS set for Float-IP - static-web.example.com - ุงุฒ ูุฑ ุฏุงููู ุง ฺฉู ุฏุงุฑุฏ ูุชูุงูุฏ ุงุณุชูุงุฏู ฺฉูู) 
   - **Webservers:** 10.0.0.21 , 10.0.0.22
   - **Backup:**  10.0.0.31

- **ููุงุจุน ุณุฎุช ุงูุฒุงุฑ:**  

  - **CPU:**  
     - **LoadBlancers:** 2Core
     - **Webservers:** 2Core
     - **Backup:** 1Core
  - **ูููุฑ:**  
     - **LoadBlancers:** 2G
     - **Webservers:** 2G
     - **Backup:** 1G
  - **ุฏุณฺฉ:**  
     - **LoadBlancers:** 
       - **Partition:** /deb/sda1 **SIZE:** 1G **MOUNTPOINT:** /boot/efi
       - **PV:** /deb/sda2 **VG:** vg_root **LV:** lv_root **SIZE:** 20G **MOUNTPOINT:** /
       - **PV:** /deb/sdb **VG:** vg_var **LV:** lv_var **SIZE:** 40G **MOUNTPOINT:** /var
     - **Webservers:**
       - **Partition:** /deb/sda1 **SIZE:** 1G **MOUNTPOINT:** /boot/efi
       - **PV:** /deb/sda2 **VG:** vg_root **LV:** lv_root **SIZE:** 20G **MOUNTPOINT:** /
       - **PV:** /deb/sdb **VG:** vg_var **LV:** lv_var **SIZE:** 40G **MOUNTPOINT:** /var
     - **Backup:**
       - **Partition:** /deb/sda1 **SIZE:** 1G **MOUNTPOINT:** /boot/efi
       - **PV:** /deb/sda2 **VG:** vg_root **LV:** lv_root **SIZE:** 20G **MOUNTPOINT:** /
       - **PV:** /deb/sdb **VG:** vg_var **LV:** lv_var **SIZE:** 40G **MOUNTPOINT:** /var
       - **PV:** /deb/sdc **VG:** vg_backup **LV:** lv_backup **SIZE:** 40G **MOUNTPOINT:** /backup

- **ูุงุณุช ูู:**  
    - **loadbalancer-1**  
    - **loadbalancer-2**  
    - **web-1**  
    - **web-2**  
    - **backup-server**

---
## ๐ **ุฌุฒุฆุงุช ูพฺฉุฑุจูุฏ**

### **ููุฏุจุงูุงูุณุฑ**  
- **Loadbalancer:** ุจุฑุง ุชูุฒุน ุจุงุฑ ุจู ูุงุดู ูุง ูุจ (haproxy)  
- **SSL ุจุง Letโs Encrypt:** ฺฏูุงููุงูู ุงุณ ุงุณ ุงู ุจุฑุง ุฏุงููู - ุจู ฺฉูฺฉ cerbot ู DNS challenge verification
- **Load Balancing:** ูุชุฏ `source IP`  
- **Rate Limiting:** ูุญุฏูุฏุช ุฏุฑุฎูุงุณุช ุจุฑ ุงุณุงุณ IP  
- **Log Rotation:** ุฌููฺฏุฑ ุงุฒ ูพุฑ ุดุฏู ูุถุง ุฏุณฺฉ  
- **IP ุดูุงูุฑ:** ุจุง ุงุณุชูุงุฏู ุงุฒ `Keepalived` ุจุฑุง ุญูุธ ุฏุณุชุฑุณโูพุฐุฑ  

### **ูุจโุณุฑูุฑูุง**  
- **ูุญุชูุง ุงุณุชุงุชฺฉ:** `/var/www/html`  
- **ฺฉุด:** ูุนุงูโุณุงุฒ ฺฉุด ุจุฑุง ูพุงุณุฎโูุง ูฺฉุฑุฑ  
- **Log Rotation:** ุฌููฺฏุฑ ุงุฒ ูพุฑ ุดุฏู ูุถุง ุฏุณฺฉ  
- **โBackup Service:** ฺฉ ุงุณฺฉุฑูพุช ุจุด ฺฉู ุจู ุตูุฑุช ฺฉ systemd ุณุฑูุณ ุจู ุตูุฑุช ุฏูุฑู ุง ูุฑ ถ ุณุงุนุช ุงุฒ `/var/www/html`  ุณุฑูุฑ ุจฺฉ ุขูพ ฺฏุฑูุชู ู ุจู ุณุฑูุฑ ุจฺฉ ุขูพ ุงุฑุณุงู ูฺฉูุฏ
(ูุงููุง ุฏุฑ ุณุฑูุฑ ุจฺฉ ุขูพ ุจุงุฏ ุฏุฑ ุฏุงฺฉุชูุฑ `/backup` ู ุฏุฑ ูุงู ุจุง ููุฑูุช ุฒุฑ ูฺฏู ุฏุงุฑ ุดูุฏ
`webbackup_HOSTNAME_DATEOFBACKUP.tar.gz`

ุจู ุนููุงู ูุซุงู:

`/backup/webbackup_web-1_2025-01-01-12-00.tar.gz`

### **ุณุฑูุฑ ุจฺฉุงูพ(Backupserver)**  
- **ุญุฐู ุจฺฉ ุขูพ ูุง ูุฏู** ูฺฉุงูุฑู ุงุฌุงุฏ ุดูุฏ ุชุง ุจฺฉ ุขูพ ูุง ูุฏู ุชุฑ ุงุฒ ฺฉ ููุชู ุงุฒ `/backup/` ุญุฐู ฺฏุฑุฏุฏ  

---
## ๐ **ุชุณุช ู ุงุนุชุจุงุฑุณูุฌ**
- ุฏุณุชุฑุณ ุจู ูุจโุณุงุช ุงุฒ ุทุฑู ุฏุงููู ุณุช ุดุฏู 
- ุจุฑุฑุณ SSL ู ุงุนุชุจุงุฑ ุขู  
- ุจุฑุฑุณ Rate Limit ุงุฒ ุทุฑู ุฏุฑุฎูุงุณุชโูุง ูุชุนุฏุฏ  
- ุจุฑุฑุณ ฺฉุด ุจุง ูุงูโูุง ุงุณุชุงุชฺฉ  
- ุชุณุช Failover ุจุง ุฎุงููุด ฺฉุฑุฏู ฺฉ ููุฏุจุงูุงูุณุฑ  
- ุจุฑุฑุณ ุณุฑูุณ ุจฺฉ ุขูพฺฏุฑ ู ุชุณุช ุจฺฉ ุขูพ ูุง ฺฏุฑูุชู ุดุฏู
- ุชุบุฑ ุฏุฑ ูพุฑูฺู ู ุจุฑฺฏุฑุฏุงูุฏู ุจฺฉ ุขูพ ูุง
- ุจุงุฒฺฏุฑุฏุงูุฏู ุจฺฉ ุงูพ ุณุฑูุฑ ุจุฏูู ุฏุงู ุชุงู ุงูพูฺฉุดู 

---
## ๐ **ฺฏุงูโูุง ุจุนุฏ (ูพุดุฑูุชูโุชุฑ)**  
- **Integrate CI/CD Pipeline:** ุจุฑุง ุขูพุฏุช ูุจโุณุงุช  
- **Observability:** ุงุถุงูู ฺฉุฑุฏู Prometheus ู Grafana ุจุฑุง ูุงูุชูุฑูฺฏ  
- **Security Auditing:** ุงุณฺฉู ุงููุช ุฏูุฑูโุง  

ุงฺฏุฑ ุชุบุฑ ุง ุฌุฒุฆุงุช ุจุดุชุฑ ูุงุฒ ุฏุงุฑุฏุ ุงุทูุงุน ุจุฏุฏ! ๐